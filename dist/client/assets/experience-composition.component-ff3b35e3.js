import{B as d,r as a,j as u,l,m as y,p as c,y as s,f as m,q as S,u as v,_ as r,g as o,v as n,h as $,w as f,x as g,S as C,L as R,o as x}from"./index-4d2c92b7.js";import{o as h}from"./observe.decorator-af7161d0.js";import{C as b}from"./component.mixin-6d7092a2.js";import{t as L}from"./state-464c8ba0.js";import{l as j}from"./layout.styles-1c4c0b88.js";import"./screen-c0aae3c9.js";let i=class extends b(){constructor(){super(),this.uid="",this.uid$=new d(this.uid),this.route="",this.route$=new d(this.route),this.experienceService=a(f,null),this.registryService=a(g),this.ssrAwaiter=a(C,null),this.hasSSR=!1,this.isHydrated=!1,this.layoutBuilder=a(R),this.components$=u([this.uid$,this.route$]).pipe(l(([e,t],p)=>(p>0&&(this.isHydrated=!0),this.experienceService?.getComponent({uid:e,route:t})||x({}))),y(e=>e?.components??[])),this.hasSSR=!!this.renderRoot}static{this.styles=j}isEmpty(){return!this.renderRoot.querySelector(":not(style)")}shouldRenderChildren(){return!!this.renderRoot&&!this.isEmpty()&&!c&&!this.isHydrated}hydrateOnDemand(){this.isHydrated||(this.isHydrated=!0,this.requestUpdate())}render(){return s`
      ${m(this.components$,e=>this.shouldRenderChildren()?s`${[...this.renderRoot.children]}`:e?s`${S(e,t=>t.id,t=>s`${this.registryService.resolveTemplate(t.type,t.id,this.getLayoutClasses(t))} `)}
              ${this.addInlineStyles(e)}`:s``,()=>s`Loading...`)}
    `}addInlineStyles(e){if(!e)return s``;const t=this.layoutBuilder.collectStyles(e);return t!==""?s`${v(`<style>${t}</style>`)}`:s``}getLayoutClasses(e){if(!!e.options?.data)return this.layoutBuilder.getLayoutClasses(e.options.data)}};r([L(),o("design:type",Array)],i.prototype,"components",void 0);r([n(),o("design:type",Object)],i.prototype,"uid",void 0);r([h(),o("design:type",Object)],i.prototype,"uid$",void 0);r([n(),o("design:type",Object)],i.prototype,"route",void 0);r([h(),o("design:type",Object)],i.prototype,"route$",void 0);i=r([$(),o("design:paramtypes",[])],i);export{i as ExperienceCompositionComponent};
