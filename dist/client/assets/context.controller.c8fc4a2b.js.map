{"version":3,"file":"context.controller.c8fc4a2b.js","sources":["../../../node_modules/@spryker-oryx/core/src/services/context/context.controller.js"],"sourcesContent":["import { resolve } from '@spryker-oryx/injector';\nimport { BehaviorSubject, combineLatest, distinctUntilChanged, EMPTY, map, of, skip, startWith, switchMap, } from 'rxjs';\nimport { ContextService } from './context.service';\nexport class ContextController {\n    constructor(host) {\n        this.host = host;\n        this.context = resolve(ContextService, null);\n        this.triggerContext$ = new BehaviorSubject(null);\n        (this.host = host).addController(this);\n    }\n    get(key, overrideContext$ = EMPTY) {\n        return combineLatest([\n            overrideContext$.pipe(startWith(undefined)),\n            this.triggerContext$.pipe(startWith(undefined), switchMap(() => this.context?.get(this.host, key) ?? of(undefined))),\n        ]).pipe(skip(1), map(([overrideContext, context]) => overrideContext ?? context), distinctUntilChanged());\n    }\n    provide(key, value) {\n        if (value === undefined) {\n            this.context?.remove(this.host, key);\n            return;\n        }\n        this.context?.provide(this.host, key, value);\n    }\n    remove(key) {\n        this.context?.remove(this.host, key);\n    }\n    hostConnected() {\n        this.triggerContext$.next();\n    }\n}\n//# sourceMappingURL=context.controller.js.map"],"names":["ContextController","host","resolve","ContextService","BehaviorSubject","key","overrideContext$","EMPTY","combineLatest","startWith","switchMap","_b","_a","of","skip","map","overrideContext","context","distinctUntilChanged","value"],"mappings":"8GAGO,MAAMA,CAAkB,CAC3B,YAAYC,EAAM,CACd,KAAK,KAAOA,EACZ,KAAK,QAAUC,EAAQC,EAAgB,IAAI,EAC3C,KAAK,gBAAkB,IAAIC,EAAgB,IAAI,GAC9C,KAAK,KAAOH,GAAM,cAAc,IAAI,CACxC,CACD,IAAII,EAAKC,EAAmBC,EAAO,CAC/B,OAAOC,EAAc,CACjBF,EAAiB,KAAKG,EAAU,MAAS,CAAC,EAC1C,KAAK,gBAAgB,KAAKA,EAAU,MAAS,EAAGC,EAAU,aAAM,OAAAC,GAAAC,EAAA,KAAK,UAAL,YAAAA,EAAc,IAAI,KAAK,KAAMP,KAA7B,KAAAM,EAAqCE,EAAG,MAAS,EAAC,CAAC,CACtH,CAAA,EAAE,KAAKC,EAAK,CAAC,EAAGC,EAAI,CAAC,CAACC,EAAiBC,CAAO,IAAMD,GAAA,KAAAA,EAAmBC,CAAO,EAAGC,EAAsB,CAAA,CAC3G,CACD,QAAQb,EAAKc,EAAO,SAChB,GAAIA,IAAU,OAAW,EACrBP,EAAA,KAAK,UAAL,MAAAA,EAAc,OAAO,KAAK,KAAMP,GAChC,MACH,EACDM,EAAA,KAAK,UAAL,MAAAA,EAAc,QAAQ,KAAK,KAAMN,EAAKc,EACzC,CACD,OAAOd,EAAK,QACRO,EAAA,KAAK,UAAL,MAAAA,EAAc,OAAO,KAAK,KAAMP,EACnC,CACD,eAAgB,CACZ,KAAK,gBAAgB,MACxB,CACL"}