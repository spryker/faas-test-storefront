{"version":3,"file":"box.component.e360fbf0.js","sources":["../../../node_modules/rxjs/dist/esm5/internal/operators/debounce.js","../../../node_modules/@spryker-oryx/search/box/src/controllers/query-controls.controller.js","../../../node_modules/@spryker-oryx/search/box/src/controllers/render-suggestion.controller.js","../../../node_modules/@spryker-oryx/search/box/src/controllers/scrolling-area.controller.js","../../../node_modules/@spryker-oryx/search/box/src/box.component.js"],"sourcesContent":["import { operate } from '../util/lift';\nimport { noop } from '../util/noop';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { innerFrom } from '../observable/innerFrom';\nexport function debounce(durationSelector) {\n    return operate(function (source, subscriber) {\n        var hasValue = false;\n        var lastValue = null;\n        var durationSubscriber = null;\n        var emit = function () {\n            durationSubscriber === null || durationSubscriber === void 0 ? void 0 : durationSubscriber.unsubscribe();\n            durationSubscriber = null;\n            if (hasValue) {\n                hasValue = false;\n                var value = lastValue;\n                lastValue = null;\n                subscriber.next(value);\n            }\n        };\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            durationSubscriber === null || durationSubscriber === void 0 ? void 0 : durationSubscriber.unsubscribe();\n            hasValue = true;\n            lastValue = value;\n            durationSubscriber = createOperatorSubscriber(subscriber, emit, noop);\n            innerFrom(durationSelector(value)).subscribe(durationSubscriber);\n        }, function () {\n            emit();\n            subscriber.complete();\n        }, undefined, function () {\n            lastValue = durationSubscriber = null;\n        }));\n    });\n}\n//# sourceMappingURL=debounce.js.map","import { html } from 'lit/static-html.js';\nexport class QueryControlsController {\n    dispatchEvent(e, eventType) {\n        e.target?.dispatchEvent(new CustomEvent(eventType, { bubbles: true, composed: true }));\n    }\n    // The oryx-typeahead is using focusin and mousedown events listening inside for\n    // managing its opened state.\n    // Need to mute this behavior for control buttons to avoid unexpected closing/opening\n    // of dropdown with results\n    muteMousedown(e) {\n        e.stopPropagation();\n        e.preventDefault();\n    }\n    renderControls(options) {\n        return html `\n      <oryx-button slot=\"suffix\" type=\"text\">\n        <button\n          @click=${(e) => this.dispatchEvent(e, 'oryx.clear')}\n          @mousedown=${this.muteMousedown}\n        >\n          ${options.clearButtonTitle || 'Clear'}\n        </button>\n      </oryx-button>\n\n      <oryx-icon-button slot=\"suffix\" size=\"small\">\n        <button\n          aria-label=${options.closeButtonArialLabel || 'Close results'}\n          @click=${(e) => this.dispatchEvent(e, 'oryx.close')}\n          @mousedown=${this.muteMousedown}\n        >\n          <oryx-icon type=\"close\"></oryx-icon>\n        </button>\n      </oryx-icon-button>\n    `;\n    }\n}\n//# sourceMappingURL=query-controls.controller.js.map","import { SemanticLinkType } from '@spryker-oryx/site';\nimport { html } from 'lit/static-html.js';\nexport class RenderSuggestionController {\n    processCompletions(completions) {\n        return completions.map((name) => ({ name, params: { q: name } }));\n    }\n    renderLink({ title, options, type }) {\n        if (!options.length) {\n            return html ``;\n        }\n        return html `\n      <h5>${title}</h5>\n      <ul>\n        ${options.map(({ name, url, params }) => html `\n            <li>\n              <content-link\n                .options=\"${{\n            type,\n            id: url ?? '',\n            params: params ?? null,\n            text: name,\n        }}\"\n                close-popover\n              ></content-link>\n            </li>\n          `)}\n      </ul>\n    `;\n    }\n    renderNothingFound({ nothingFoundText }) {\n        return html `\n      <div slot=\"empty\">\n        <oryx-icon type=\"search\"></oryx-icon>\n        <span>${nothingFoundText || 'Nothing foundâ€¦'}</span>\n      </div>\n    `;\n    }\n    renderLinksSection(suggestion, options) {\n        const links = [\n            {\n                title: options.completionTitle || 'Search suggestions',\n                options: this.processCompletions(suggestion.completion),\n                type: SemanticLinkType.ProductList,\n            },\n            {\n                title: options.categoriesTitle || 'In categories',\n                options: suggestion.categories.map(({ name, url }) => ({\n                    name,\n                    url: url?.substring(url.lastIndexOf('/') + 1),\n                    params: { q: url?.substring(url.lastIndexOf('/') + 1) },\n                })),\n                type: SemanticLinkType.Category,\n            },\n            {\n                title: options.cmsTitle || 'In CMS pages',\n                options: suggestion.cmsPages,\n                type: SemanticLinkType.Page,\n            },\n        ];\n        return html ` <section>${links.map((l) => this.renderLink(l))}</section> `;\n    }\n    renderProduct(product) {\n        return html `\n      <content-link\n        class=\"product\"\n        .options=\"${{\n            type: SemanticLinkType.Product,\n            id: product.sku,\n            label: product.name,\n        }}\"\n        close-popover\n      >\n        <product-media\n          .product=${product}\n          .options=${{ container: \"thumbnail\" /* ProductMediaContainerSize.Thumbnail */ }}\n        ></product-media>\n        <product-title .product=${product}></product-title>\n        <product-price .product=${product}></product-price>\n      </content-link>\n    `;\n    }\n    renderProductsSection(suggestion, options) {\n        return html `\n      <section>\n        <h5>${options.productsTitle || 'Products'}</h5>\n        ${suggestion.products.map(this.renderProduct)}\n        <!-- TODO link to PLP -->\n        <oryx-button outline>\n          <a href=\"#\"\n            >${options.viewAllProductsButtonTitle || 'View all products'}</a\n          >\n        </oryx-button>\n      </section>\n    `;\n    }\n}\n//# sourceMappingURL=render-suggestion.controller.js.map","export class ScrollingAreaController {\n    constructor(host) {\n        this.host = host;\n        this.host.addController(this);\n    }\n    setScrollAttributes(scrollContainer) {\n        if (!scrollContainer) {\n            this.host.removeAttribute('scrollable-top');\n            this.host.removeAttribute('scrollable-bottom');\n            return;\n        }\n        const { height } = scrollContainer.getBoundingClientRect();\n        this.host.toggleAttribute('scrollable-top', !!Math.ceil(scrollContainer.scrollTop));\n        this.host.toggleAttribute('scrollable-bottom', scrollContainer.scrollHeight >\n            Math.ceil(height + scrollContainer.scrollTop));\n    }\n}\n//# sourceMappingURL=scrolling-area.controller.js.map","import { __decorate, __metadata } from \"tslib\";\nimport { ComponentMixin, ContentController } from '@spryker-oryx/experience';\nimport { resolve } from '@spryker-oryx/injector';\nimport { SuggestionService } from '@spryker-oryx/search';\nimport '@spryker-oryx/ui/typeahead';\nimport { hydratable } from '@spryker-oryx/utilities';\nimport { asyncValue, subscribe } from '@spryker-oryx/utilities/lit-rxjs';\nimport { property } from 'lit/decorators.js';\nimport { createRef, ref } from 'lit/directives/ref.js';\nimport { when } from 'lit/directives/when.js';\nimport { html } from 'lit/static-html.js';\nimport { catchError, combineLatest, debounce, defer, distinctUntilChanged, filter, fromEvent, map, of, shareReplay, Subject, switchMap, tap, timer, withLatestFrom, } from 'rxjs';\nimport { QueryControlsController, RenderSuggestionController, ScrollingAreaController, } from './controllers';\nimport { baseStyles, searchboxStyles } from './styles';\nlet SearchBoxComponent = class SearchBoxComponent extends ComponentMixin() {\n    constructor() {\n        super();\n        this.defaultOptions = {\n            minChars: 2,\n            completionsCount: 5,\n            productsCount: 5,\n            categoriesCount: 5,\n            cmsCount: 0,\n        };\n        this.contentController = new ContentController(this);\n        this.suggestionService = resolve(SuggestionService);\n        this.options$ = this.contentController.getOptions().pipe(map((options) => ({ ...this.defaultOptions, ...options })), shareReplay({ refCount: true, bufferSize: 1 }), tap((options) => this.applyInputTexts(options)));\n        this.scrollingAreaController = new ScrollingAreaController(this);\n        this.queryControlsController = new QueryControlsController();\n        this.renderSuggestionController = new RenderSuggestionController();\n        this.triggerInputValue$ = new Subject();\n        this.suggestion$ = this.triggerInputValue$.pipe(debounce(() => timer(300)), map((q) => q.trim()), distinctUntilChanged(), withLatestFrom(this.options$), switchMap(([query, options]) => {\n            if (query && (!options.minChars || query.length >= options.minChars)) {\n                return this.suggestionService.get({ query }).pipe(map((raw) => {\n                    const suggestion = raw\n                        ? {\n                            completion: raw.completion.slice(0, options.completionsCount),\n                            products: raw.products?.slice(0, options.productsCount) ?? [],\n                            categories: raw.categories.slice(0, options.categoriesCount),\n                            cmsPages: raw.cmsPages.slice(0, options.cmsCount),\n                        }\n                        : raw;\n                    return { suggestion, options };\n                }));\n            }\n            return of({ suggestion: null, options });\n        }), tap(({ suggestion }) => {\n            this.stretched = this.hasCompleteData(suggestion);\n        }));\n        this.controlButtons$ = combineLatest([\n            this.options$,\n            this.triggerInputValue$,\n        ]).pipe(map(([options, query]) => ({ options, showButtons: !!query })));\n        this.scrollEvent = defer(() => fromEvent(this, 'containerScroll')).pipe(catchError(() => of(null)), filter((v) => v !== null), debounce(() => timer(20)), tap(() => {\n            this.scrollingAreaController.setScrollAttributes(this.scrollContainerRef.value);\n        }));\n        this.query = '';\n        this.stretched = false;\n        this.inputRef = createRef();\n        this.scrollContainerRef = createRef();\n        this.clear = this.clear.bind(this);\n        this.close = this.close.bind(this);\n        this.dispatchContainerScroll = this.dispatchContainerScroll.bind(this);\n    }\n    firstUpdated() {\n        if (this.query) {\n            this.inputRef.value.value = this.query;\n            this.triggerInputValue$.next(this.query);\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.addEventListener('oryx.clear', this.clear);\n        this.addEventListener('oryx.close', this.close);\n    }\n    disconnectedCallback() {\n        this.removeEventListener('oryx.clear', this.clear);\n        this.removeEventListener('oryx.close', this.close);\n        super.disconnectedCallback();\n    }\n    clear(e) {\n        e.stopPropagation();\n        const input = this.inputRef.value;\n        input.value = '';\n        this.query = '';\n        this.triggerInputValue$.next('');\n    }\n    close() {\n        this.renderRoot.querySelector('oryx-typeahead')?.removeAttribute('open');\n    }\n    onTypeahead() {\n        this.query = this.inputRef.value.value;\n        this.triggerInputValue$.next(this.query);\n    }\n    dispatchContainerScroll(e) {\n        e.target?.dispatchEvent(new CustomEvent('containerScroll', { bubbles: true, composed: true }));\n    }\n    applyInputTexts(options) {\n        const { placeholder } = options;\n        if (placeholder) {\n            this.inputRef?.value?.setAttribute('placeholder', placeholder);\n        }\n    }\n    hasLinks(suggestion) {\n        return !!(suggestion?.completion.length ||\n            suggestion?.cmsPages.length ||\n            suggestion?.categories.length);\n    }\n    hasProducts(suggestion) {\n        return !!suggestion?.products?.length;\n    }\n    isNothingFound(suggestion) {\n        return !this.hasLinks(suggestion) && !this.hasProducts(suggestion);\n    }\n    hasCompleteData(suggestion) {\n        return this.hasLinks(suggestion) && this.hasProducts(suggestion);\n    }\n    renderSuggestion(suggestion, options) {\n        if (!suggestion) {\n            return html ``;\n        }\n        if (this.isNothingFound(suggestion)) {\n            return this.renderSuggestionController.renderNothingFound(options);\n        }\n        return html `\n      <div slot=\"option\">\n        <div\n          @scroll=${this.dispatchContainerScroll}\n          ${ref(this.scrollContainerRef)}\n        >\n          ${when(this.hasLinks(suggestion), () => this.renderSuggestionController.renderLinksSection(suggestion, options))}\n          ${when(this.hasProducts(suggestion), () => this.renderSuggestionController.renderProductsSection(suggestion, options))}\n        </div>\n      </div>\n    `;\n    }\n    render() {\n        return html `\n      <oryx-typeahead @oryx.typeahead=${this.onTypeahead}>\n        <oryx-icon slot=\"prefix\" type=\"search\" size=\"medium\"></oryx-icon>\n        <input ${ref(this.inputRef)} placeholder=\"Search\" />\n        ${asyncValue(this.suggestion$, ({ suggestion, options }) => html `${this.renderSuggestion(suggestion, options)}`)}\n        ${asyncValue(this.controlButtons$, ({ options, showButtons }) => showButtons\n            ? this.queryControlsController.renderControls(options)\n            : html ``)}\n      </oryx-typeahead>\n    `;\n    }\n};\nSearchBoxComponent.styles = [baseStyles, searchboxStyles];\n__decorate([\n    subscribe(),\n    __metadata(\"design:type\", Object)\n], SearchBoxComponent.prototype, \"scrollEvent\", void 0);\n__decorate([\n    property({ type: String }),\n    __metadata(\"design:type\", Object)\n], SearchBoxComponent.prototype, \"query\", void 0);\n__decorate([\n    property({ type: Boolean, reflect: true }),\n    __metadata(\"design:type\", Object)\n], SearchBoxComponent.prototype, \"stretched\", void 0);\nSearchBoxComponent = __decorate([\n    hydratable('focusin'),\n    __metadata(\"design:paramtypes\", [])\n], SearchBoxComponent);\nexport { SearchBoxComponent };\n//# sourceMappingURL=box.component.js.map"],"names":["debounce","durationSelector","operate","source","subscriber","hasValue","lastValue","durationSubscriber","emit","value","createOperatorSubscriber","noop","innerFrom","QueryControlsController","e","eventType","_a","options","html","RenderSuggestionController","completions","name","title","type","url","params","nothingFoundText","suggestion","links","SemanticLinkType","l","product","ScrollingAreaController","host","scrollContainer","height","SearchBoxComponent","ComponentMixin","ContentController","resolve","SuggestionService","map","shareReplay","tap","Subject","timer","q","distinctUntilChanged","withLatestFrom","switchMap","query","raw","_b","of","combineLatest","defer","fromEvent","catchError","filter","v","createRef","input","placeholder","ref","when","asyncValue","showButtons","baseStyles","searchboxStyles","__decorate","subscribe","__metadata","property","hydratable"],"mappings":"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"}