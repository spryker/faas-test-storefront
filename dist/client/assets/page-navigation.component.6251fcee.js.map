{"version":3,"file":"page-navigation.component.6251fcee.js","sources":["../../../node_modules/@spryker-oryx/ui/navigations/page-navigation/src/page-navigation.controller.js","../../../node_modules/@spryker-oryx/ui/navigations/page-navigation/src/page-navigation.styles.js","../../../node_modules/@spryker-oryx/ui/navigations/page-navigation/src/page-navigation.component.js"],"sourcesContent":["import { queryAssignedElements, throttle, } from '@spryker-oryx/utilities/typescript';\nexport class PageNavigationController {\n    constructor(host) {\n        this.host = host;\n        this.navItems = [];\n        this.host.addController(this);\n        this.onClick = this.onClick.bind(this);\n        this.onKeydown = this.onKeydown.bind(this);\n        this.detectActiveSection = this.detectActiveSection.bind(this);\n        this.onScroll = throttle(this.detectActiveSection, 50, true);\n    }\n    hostConnected() {\n        if (!this.host.disableNavigation) {\n            this.setNavigationItemsListeners();\n        }\n        this.disableNavigation = this.host.disableNavigation;\n        this.setScrollListener();\n    }\n    hostUpdated() {\n        if (this.disableNavigation !== this.host.disableNavigation) {\n            if (!this.host.disableNavigation) {\n                this.setNavigationItemsListeners();\n            }\n            else {\n                this.removeNavigationItemsListeners();\n            }\n            this.disableNavigation = this.host.disableNavigation;\n        }\n        if (this.sectionsContainerSelector !== this.host.sectionsContainerSelector) {\n            this.navItems = (queryAssignedElements(this.host));\n            this.detectActiveSection();\n        }\n    }\n    hostDisconnected() {\n        const sectionsContainer = this.getSectionsContainer();\n        if (sectionsContainer) {\n            sectionsContainer.removeEventListener('scroll', this.onScroll);\n        }\n        this.removeNavigationItemsListeners();\n    }\n    setScrollListener() {\n        const sectionsContainer = this.getSectionsContainer();\n        if (sectionsContainer) {\n            sectionsContainer.addEventListener('scroll', this.onScroll);\n        }\n    }\n    setNavigationItemsListeners() {\n        this.host.addEventListener('keydown', this.onKeydown);\n        this.host.addEventListener('click', this.onClick);\n    }\n    removeNavigationItemsListeners() {\n        this.host.removeEventListener('keydown', this.onKeydown);\n        this.host.removeEventListener('click', this.onClick);\n    }\n    getSectionsContainer() {\n        return window.document.querySelector(this.host.sectionsContainerSelector);\n    }\n    onKeydown(e) {\n        if (e.key === 'Enter') {\n            this.onNavigationItemActivated(e);\n        }\n    }\n    onClick(e) {\n        this.onNavigationItemActivated(e);\n    }\n    onNavigationItemActivated(e) {\n        const targetId = e.target\n            .closest('oryx-page-navigation-item')\n            ?.getAttribute('targetId');\n        if (targetId) {\n            document.getElementById(targetId)?.scrollIntoView();\n        }\n    }\n    getVisibleSections() {\n        const sectionsContainer = this.getSectionsContainer();\n        if (!sectionsContainer) {\n            return [];\n        }\n        const sections = this.getSections(this.navItems);\n        const { clientHeight: viewportHeight, scrollTop } = sectionsContainer;\n        return sections.reduce((acc, section) => {\n            const { offsetTop: elOffsetTop, offsetHeight: elHeight } = section;\n            if (scrollTop < elOffsetTop + elHeight &&\n                elOffsetTop < scrollTop + viewportHeight) {\n                const hiddenBefore = scrollTop - elOffsetTop;\n                const hiddenAfter = elOffsetTop + elHeight - (scrollTop + viewportHeight);\n                let visibilityPercentage = 100;\n                if (hiddenBefore > 0) {\n                    visibilityPercentage -= (hiddenBefore * 100) / elHeight;\n                }\n                else if (hiddenAfter > 0) {\n                    visibilityPercentage -= (hiddenAfter * 100) / elHeight;\n                }\n                acc.push({ id: section.id, percent: visibilityPercentage });\n            }\n            return acc;\n        }, []);\n    }\n    getMostVisibleSection(sections) {\n        let mostVisibleSection = sections[0];\n        for (let i = 1; i < sections.length; i++) {\n            if (sections[i].percent > mostVisibleSection.percent) {\n                mostVisibleSection = sections[i];\n            }\n        }\n        return mostVisibleSection;\n    }\n    emitCurrentSection(id) {\n        if (this.currentSectionId !== id) {\n            const event = new CustomEvent('section-change', { detail: { id } });\n            this.host.dispatchEvent(event);\n            this.currentSectionId = id;\n        }\n    }\n    detectActiveSection() {\n        const activeSections = this.getVisibleSections();\n        if (!activeSections.length) {\n            return;\n        }\n        const mostVisibleSection = this.getMostVisibleSection(activeSections);\n        this.emitCurrentSection(mostVisibleSection.id);\n        const navItemToBeActive = this.navItems.find(({ targetId }) => {\n            return targetId === mostVisibleSection?.id;\n        });\n        this.navItems.forEach((navItem) => {\n            navItem.toggleAttribute('active', !!navItemToBeActive?.targetId &&\n                navItem.targetId === navItemToBeActive?.targetId);\n        });\n    }\n    getSections(navItems) {\n        return navItems\n            .map(({ targetId }) => {\n            return document.querySelector(`#${targetId}`);\n        })\n            .filter((section) => section);\n    }\n}\n//# sourceMappingURL=page-navigation.controller.js.map","import { css } from 'lit';\nexport const styles = css `\n  ::slotted(*)::before {\n    content: '';\n    width: 1px;\n    background: var(--oryx-color-canvas-500);\n    height: 100%;\n    position: absolute;\n    inset-block-start: 0;\n    inset-inline-start: 23.5px;\n  }\n\n  ::slotted(:first-child)::before {\n    content: '';\n    width: 1px;\n    height: calc(100% - 20px);\n    background: var(--oryx-color-canvas-500);\n    position: absolute;\n    inset-block-start: 20px;\n    inset-inline-start: 23.5px;\n  }\n\n  ::slotted(:last-child)::before {\n    content: '';\n    width: 1px;\n    background: var(--oryx-color-canvas-500);\n    height: 20px;\n    position: absolute;\n    inset-block-start: 0;\n    inset-inline-start: 23.5px;\n  }\n\n  ::slotted(:first-child)::after,\n  ::slotted(*)::after {\n    content: '';\n    width: 1px;\n    height: 10px;\n    background: var(--oryx-color-canvas-500);\n    position: absolute;\n    inset-block-end: -11px;\n    inset-inline-start: 23.5px;\n  }\n\n  ::slotted(:last-child)::after {\n    display: none;\n  }\n\n  ::slotted(:only-child)::before {\n    content: '';\n    display: none;\n  }\n`;\n//# sourceMappingURL=page-navigation.styles.js.map","import { __decorate, __metadata } from \"tslib\";\nimport { html, LitElement } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { PageNavigationController } from './page-navigation.controller';\nimport { styles } from './page-navigation.styles';\nexport class PageNavigationComponent extends LitElement {\n    constructor() {\n        super(...arguments);\n        this.disableNavigation = false;\n        this.controller = new PageNavigationController(this);\n    }\n    render() {\n        return html `\n      <nav aria-label=${this.ariaLabel}>\n        <slot @slotchange=${() => this.requestUpdate()}></slot>\n      </nav>\n    `;\n    }\n}\nPageNavigationComponent.styles = styles;\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Object)\n], PageNavigationComponent.prototype, \"disableNavigation\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], PageNavigationComponent.prototype, \"sectionsContainerSelector\", void 0);\n//# sourceMappingURL=page-navigation.component.js.map"],"names":["PageNavigationController","host","throttle","queryAssignedElements","sectionsContainer","e","targetId","_a","_b","sections","viewportHeight","scrollTop","acc","section","elOffsetTop","elHeight","hiddenBefore","hiddenAfter","visibilityPercentage","mostVisibleSection","id","event","activeSections","navItemToBeActive","navItem","navItems","styles","css","PageNavigationComponent","LitElement","html","__decorate","property","__metadata"],"mappings":"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"}