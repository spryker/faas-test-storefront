{"version":3,"file":"entries.component.4486d98b.js","sources":["../../../node_modules/@spryker-oryx/cart/entries/src/entries.styles.js","../../../node_modules/@spryker-oryx/cart/entries/src/entries.component.js"],"sourcesContent":["import { css } from 'lit';\nexport const styles = css `\n  :host,\n  oryx-collapsible::part(content) {\n    display: flex;\n    flex-direction: column;\n    gap: var(--oryx-space-4);\n  }\n\n  oryx-collapsible::part(content) {\n    padding-block: var(--oryx-space-4);\n  }\n\n  section {\n    --oryx-icon-size: 40px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: var(--oryx-space-4);\n    background: var(--oryx-color-canvas-200);\n  }\n\n  section p {\n    margin-block: 14px 25px;\n  }\n\n  [slot='header'] {\n    display: flex;\n    align-items: center;\n  }\n\n  oryx-chip {\n    margin-inline-start: var(--oryx-space-2);\n  }\n`;\n//# sourceMappingURL=entries.styles.js.map","import { __decorate } from \"tslib\";\nimport { CartComponentMixin, CartService } from '@spryker-oryx/cart';\nimport { ContentController } from '@spryker-oryx/experience';\nimport { resolve } from '@spryker-oryx/injector';\nimport { ProductService } from '@spryker-oryx/product';\nimport { hydratable } from '@spryker-oryx/utilities';\nimport { asyncValue } from '@spryker-oryx/utilities/lit-rxjs';\nimport { html } from 'lit';\nimport { BehaviorSubject, combineLatest, map, of, switchMap, tap } from 'rxjs';\nimport { styles } from './entries.styles';\nlet CartEntriesComponent = class CartEntriesComponent extends CartComponentMixin() {\n    constructor() {\n        super(...arguments);\n        this.cartService = resolve(CartService);\n        this.productService = resolve(ProductService);\n        this.contentController = new ContentController(this);\n        this.options$ = this.contentController.getOptions();\n        this.currentlyUpdated$ = new BehaviorSubject(null);\n        this.loading$ = this.cartService.getLoadingState();\n        this.entries$ = this.options$.pipe(switchMap(({ cartId }) => this.cartService.getEntries({ cartId }).pipe(switchMap((entries) => entries?.reduce((acc$, entry) => acc$.pipe(switchMap((acc) => this.productService\n            .get({ sku: entry.sku })\n            .pipe(map((product) => [\n            ...acc,\n            { ...entry, availability: product?.availability },\n        ])))), of([])) ?? of([])), tap(() => {\n            this.currentlyUpdated$.next(null);\n        }))));\n        this.entriesData$ = combineLatest([\n            this.entries$,\n            this.loading$,\n            this.currentlyUpdated$,\n            this.options$,\n        ]).pipe(map(([entries, loading, currentlyUpdated, options]) => ({\n            entries,\n            loading,\n            currentlyUpdated,\n            options,\n        })));\n    }\n    onUpdate(e, { groupKey, sku }) {\n        this.currentlyUpdated$.next(groupKey);\n        this.cartService\n            .updateEntry({ groupKey, sku, quantity: e.detail.quantity })\n            .subscribe();\n    }\n    onRemove({ groupKey }) {\n        this.cartService.deleteEntry({ groupKey }).subscribe();\n    }\n    renderEmpty() {\n        return html `\n      <section>\n        <oryx-icon type=\"cart\"></oryx-icon>\n        <p>Your shopping cart is empty</p>\n        <oryx-button size=\"large\">\n          <button>Shop now</button>\n        </oryx-button>\n      </section>\n    `;\n    }\n    renderEntries(entriesData) {\n        const { entries, loading, currentlyUpdated, options } = entriesData;\n        return html `${entries.map((entry) => html `\n        <cart-entry\n          ?inert=${loading}\n          .options=${{\n            ...options,\n            ...entry,\n            disabled: loading,\n            updating: entry.groupKey === currentlyUpdated,\n        }}\n          @submit=${(e) => this.onUpdate(e, entry)}\n          @oryx.remove=${() => this.onRemove(entry)}\n        ></cart-entry>\n      `)}`;\n    }\n    renderItemsCount(entriesData) {\n        const { options, entries } = entriesData;\n        if (options.hideItemsCount) {\n            return html ``;\n        }\n        const count = entries.reduce((acc, { quantity }) => quantity + acc, 0);\n        return html `\n      <oryx-chip>${count} ${count === 1 ? 'item' : 'items'}</oryx-chip>\n    `;\n    }\n    renderCollapsibleContainer(entriesData) {\n        const { options } = entriesData;\n        return html `\n      <oryx-collapsible ?open=${options.expanded}>\n        <span slot=\"header\">\n          Products in the order ${this.renderItemsCount(entriesData)}\n        </span>\n\n        ${this.renderEntries(entriesData)}\n      </oryx-collapsible>\n    `;\n    }\n    render() {\n        return html `\n      ${asyncValue(this.entriesData$, (entriesData) => {\n            const { entries, options } = entriesData;\n            if (!entries.length) {\n                return this.renderEmpty();\n            }\n            if (options?.collapsible) {\n                return this.renderCollapsibleContainer(entriesData);\n            }\n            return this.renderEntries(entriesData);\n        })}\n    `;\n    }\n};\nCartEntriesComponent.styles = styles;\nCartEntriesComponent = __decorate([\n    hydratable('window:load')\n], CartEntriesComponent);\nexport { CartEntriesComponent };\n//# sourceMappingURL=entries.component.js.map"],"names":["styles","css","CartEntriesComponent","CartComponentMixin","resolve","CartService","ProductService","ContentController","BehaviorSubject","switchMap","cartId","entries","_a","acc$","entry","acc","map","product","of","tap","combineLatest","loading","currentlyUpdated","options","e","groupKey","sku","html","entriesData","count","quantity","asyncValue","__decorate","hydratable"],"mappings":"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"}