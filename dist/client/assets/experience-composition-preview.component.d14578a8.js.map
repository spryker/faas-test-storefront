{"version":3,"file":"experience-composition-preview.component.d14578a8.js","sources":["../../../node_modules/@spryker-oryx/experience/composition/src/experience-composition-preview.style.js","../../../node_modules/@spryker-oryx/experience/composition/src/experience-composition-preview.component.js"],"sourcesContent":["import { css } from 'lit';\nexport const previewStyles = css `\n  .eb-preview-focus {\n    position: relative;\n  }\n  .eb-preview-focus:before {\n    content: '';\n    outline: 4px solid var(--oryx-color-primary-300);\n    outline-offset: -4px;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    z-index: var(--oryx-overlay-z-index, 3);\n  }\n\n  .eb-preview-focus:after {\n    content: attr(name);\n    position: absolute;\n    left: 0;\n    top: 0;\n    color: #fff;\n    font-size: 16px;\n    line-height: 22px;\n    font-weight: 500;\n    font-family: 'Montserrat';\n    padding: 2px 5px;\n    background-color: var(--oryx-color-primary-300);\n    z-index: var(--oryx-overlay-z-index, 3);\n  }\n`;\n//# sourceMappingURL=experience-composition-preview.style.js.map","import { __decorate, __metadata } from \"tslib\";\nimport { asyncValue, subscribe } from '@spryker-oryx/utilities/lit-rxjs';\nimport { html } from 'lit';\nimport { repeat } from 'lit/directives/repeat.js';\nimport { filter, merge, tap } from 'rxjs';\nimport { previewStyles } from './experience-composition-preview.style';\nimport { ExperienceCompositionComponent } from './experience-composition.component';\nimport { layoutStyles } from './style';\nconst EB_PREVIEW_FOCUS_CLASS = 'eb-preview-focus';\nexport class ExperienceCompositionPreviewComponent extends ExperienceCompositionComponent {\n    constructor() {\n        super(...arguments);\n        this.interaction$ = this.experienceService?.getInteractionData();\n        this.interactionMouseEvent$ = this.interaction$.pipe(filter((data) => data.action === 'mouseover' || data.action === 'mouseout'));\n        // TODO: do we need to react on composition item click?\n        this.interactionClickEvent$ = this.interaction$.pipe(filter((data) => data.action === 'click'), tap((data) => {\n            // TODO: scroll to target component\n        }));\n        this.interactionAddComponentEvent$ = this.interaction$.pipe(filter((data) => data.action === 'add'), tap((data) => {\n            const { componentId } = data;\n            // TODO: scroll to target component\n        }));\n        this.selectedComponent$ = merge(this.interactionMouseEvent$, this.interactionClickEvent$, this.interactionAddComponentEvent$).pipe(tap((data) => {\n            const focusedNameAttr = 'name';\n            const root = this.shadowRoot;\n            const focusedComponent = root?.querySelector(`.${EB_PREVIEW_FOCUS_CLASS}`);\n            const targetComponent = root?.querySelector(` [uid='${data.component.id}']`);\n            if (targetComponent &&\n                getComputedStyle(targetComponent).display === 'inline') {\n                targetComponent?.style.setProperty('display', 'block');\n            }\n            focusedComponent?.classList.remove(EB_PREVIEW_FOCUS_CLASS);\n            focusedComponent?.removeAttribute(focusedNameAttr);\n            focusedComponent?.style.removeProperty('display');\n            if (data.action !== 'mouseout') {\n                targetComponent?.classList.add(EB_PREVIEW_FOCUS_CLASS);\n                targetComponent?.setAttribute(focusedNameAttr, data.component.name);\n            }\n        }));\n    }\n    render() {\n        return html `\n      ${asyncValue(this.components$, (components) => html `${components\n            ? repeat(components, (component) => component.id, (component) => this.registryService.resolveTemplate(component.type, component.id, this.getLayoutClasses(component)))\n            : ``}\n          ${this.addInlineStyles(components)}`, () => html `Loading...`)}\n    `;\n    }\n}\nExperienceCompositionPreviewComponent.styles = [...layoutStyles, previewStyles];\n__decorate([\n    subscribe(),\n    __metadata(\"design:type\", Object)\n], ExperienceCompositionPreviewComponent.prototype, \"selectedComponent$\", void 0);\n//# sourceMappingURL=experience-composition-preview.component.js.map"],"names":["previewStyles","css","EB_PREVIEW_FOCUS_CLASS","ExperienceCompositionPreviewComponent","ExperienceCompositionComponent","_a","filter","data","tap","merge","focusedNameAttr","root","focusedComponent","targetComponent","html","asyncValue","components","repeat","component","layoutStyles","__decorate","subscribe","__metadata"],"mappings":"6aACO,MAAMA,EAAgBC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,ECOvBC,EAAyB,mBACxB,MAAMC,UAA8CC,CAA+B,CACtF,aAAc,OACV,MAAM,GAAG,SAAS,EAClB,KAAK,cAAeC,EAAA,KAAK,oBAAL,YAAAA,EAAwB,qBAC5C,KAAK,uBAAyB,KAAK,aAAa,KAAKC,EAAQC,GAASA,EAAK,SAAW,aAAeA,EAAK,SAAW,UAAU,CAAC,EAEhI,KAAK,uBAAyB,KAAK,aAAa,KAAKD,EAAQC,GAASA,EAAK,SAAW,OAAO,EAAGC,EAAKD,GAAS,CAE7G,CAAA,CAAC,EACF,KAAK,8BAAgC,KAAK,aAAa,KAAKD,EAAQC,GAASA,EAAK,SAAW,KAAK,EAAGC,EAAKD,GAAS,CAGlH,CAAA,CAAC,EACF,KAAK,mBAAqBE,EAAM,KAAK,uBAAwB,KAAK,uBAAwB,KAAK,6BAA6B,EAAE,KAAKD,EAAKD,GAAS,CAC7I,MAAMG,EAAkB,OAClBC,EAAO,KAAK,WACZC,EAAmBD,GAAA,YAAAA,EAAM,cAAc,IAAIT,KAC3CW,EAAkBF,GAAA,YAAAA,EAAM,cAAc,UAAUJ,EAAK,UAAU,QACjEM,GACA,iBAAiBA,CAAe,EAAE,UAAY,WAC9CA,GAAA,MAAAA,EAAiB,MAAM,YAAY,UAAW,UAElDD,GAAA,MAAAA,EAAkB,UAAU,OAAOV,GACnCU,GAAA,MAAAA,EAAkB,gBAAgBF,GAClCE,GAAA,MAAAA,EAAkB,MAAM,eAAe,WACnCL,EAAK,SAAW,aAChBM,GAAA,MAAAA,EAAiB,UAAU,IAAIX,GAC/BW,GAAA,MAAAA,EAAiB,aAAaH,EAAiBH,EAAK,UAAU,MAErE,CAAA,CAAC,CACL,CACD,QAAS,CACL,OAAOO;AAAAA,QACPC,EAAW,KAAK,YAAcC,GAAeF,IAAQE,EAC/CC,EAAOD,EAAaE,GAAcA,EAAU,GAAKA,GAAc,KAAK,gBAAgB,gBAAgBA,EAAU,KAAMA,EAAU,GAAI,KAAK,iBAAiBA,CAAS,CAAC,CAAC,EACnK;AAAA,YACF,KAAK,gBAAgBF,CAAU,IAAK,IAAMF,aAAiB;AAAA,KAElE,CACL,CACAX,EAAsC,OAAS,CAAC,GAAGgB,EAAcnB,CAAa,EAC9EoB,EAAW,CACPC,EAAW,EACXC,EAAW,cAAe,MAAM,CACpC,EAAGnB,EAAsC,UAAW,qBAAsB,MAAM"}