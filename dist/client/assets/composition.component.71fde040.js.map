{"version":3,"file":"composition.component.71fde040.js","sources":["../../../node_modules/@spryker-oryx/checkout/composition/src/composition.styles.js","../../../node_modules/@spryker-oryx/checkout/composition/src/composition.component.js"],"sourcesContent":["import { css } from 'lit';\nexport const styles = css `\n  header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-block-end: var(--oryx-space-4);\n  }\n\n  h1 {\n    margin: 0;\n    font-size: 22px;\n    line-height: 30px;\n    font-weight: 500;\n  }\n`;\n//# sourceMappingURL=composition.styles.js.map","import { __decorate, __metadata } from \"tslib\";\nimport { AuthService } from '@spryker-oryx/auth';\nimport { CartService } from '@spryker-oryx/cart';\nimport { CheckoutDataService, CheckoutOrchestrationService, Validity, } from '@spryker-oryx/checkout';\nimport { ComponentMixin, ContentController } from '@spryker-oryx/experience';\nimport { resolve } from '@spryker-oryx/injector';\nimport { hydratable } from '@spryker-oryx/utilities';\nimport { i18n } from '@spryker-oryx/utilities/i18n';\nimport { asyncValue, subscribe } from '@spryker-oryx/utilities/lit-rxjs';\nimport { html } from 'lit';\nimport { when } from 'lit-html/directives/when.js';\nimport { combineLatest, map } from 'rxjs';\nimport { styles } from './composition.styles';\nlet CheckoutCompositionComponent = class CheckoutCompositionComponent extends ComponentMixin() {\n    constructor() {\n        super(...arguments);\n        this.checkoutDataService = resolve(CheckoutDataService);\n        this.orchestrationService = resolve(CheckoutOrchestrationService);\n        this.options$ = new ContentController(this).getOptions();\n        this.isEmptyCart$ = resolve(CartService).isEmpty();\n        this.isAuthenticated$ = resolve(AuthService).isAuthenticated();\n        this.isGuestCheckout$ = this.checkoutDataService.isGuestCheckout();\n        this.steps$ = this.orchestrationService.getValidity();\n        this.deliveryCompleted$ = this.steps$.pipe(map((steps) => {\n            return !!(steps.find((step) => step.id === 'delivery')?.validity ===\n                Validity.Valid);\n        }));\n        //just for preview. Need to drop after implementation of additional steps\n        this.testData$ = combineLatest([\n            this.checkoutDataService.getContactDetails(),\n            this.checkoutDataService.getAddressDetails(),\n        ]);\n        this.checkout$ = combineLatest([\n            this.isEmptyCart$,\n            this.isAuthenticated$,\n            this.isGuestCheckout$,\n            this.deliveryCompleted$,\n            this.options$,\n            this.testData$,\n        ]);\n    }\n    renderGuestCheckoutHeading() {\n        return html `\n      <header>\n        <h1>${i18n('checkout.guest-checkout')}</h1>\n\n        <oryx-button type=\"text\">\n          <button\n            @click=${() => {\n            this.checkoutDataService.setIsGuestCheckout(false);\n        }}\n          >\n            ${i18n('checkout.checkout-as-register')}\n          </button>\n        </oryx-button>\n      </header>\n    `;\n    }\n    render() {\n        return html ` <!-- TODO: just for demonstration -->\n      ${asyncValue(this.steps$, (steps) => html `\n          <ul>\n            ${steps.map(({ id, validity }) => html ` <li>${id}: ${validity}</li> `)}\n          </ul>\n        `)}\n      ${asyncValue(this.checkout$, ([isEmptyCart, isAuthenticated, isGuestCheckout, deliveryCompleted, options, testData,]) => {\n            if (isEmptyCart) {\n                return html ``;\n            }\n            if (!(isAuthenticated || isGuestCheckout)) {\n                return html `\n              <checkout-login\n                @oryx.guest-submit=${() => {\n                    this.checkoutDataService.setIsGuestCheckout();\n                }}\n                .options=${{ disableGuest: options.disableGuest }}\n              ></checkout-login>\n            `;\n            }\n            return html `\n            ${when(isGuestCheckout, () => html `${this.renderGuestCheckoutHeading()}`)}\n            ${when(deliveryCompleted, () => html `\n                <h3>2. Shipping</h3>\n                <p style=\"word-break: break-all;\">\n                  ${JSON.stringify(testData[0])}\n                </p>\n\n                <p style=\"word-break: break-all;\">\n                  ${JSON.stringify(testData[1])}\n                </p>\n              `, () => html ` <checkout-delivery></checkout-delivery> `)}\n          `;\n        })}`;\n    }\n};\nCheckoutCompositionComponent.styles = styles;\n__decorate([\n    subscribe(),\n    __metadata(\"design:type\", Object)\n], CheckoutCompositionComponent.prototype, \"steps$\", void 0);\nCheckoutCompositionComponent = __decorate([\n    hydratable('window:load')\n], CheckoutCompositionComponent);\nexport { CheckoutCompositionComponent };\n//# sourceMappingURL=composition.component.js.map"],"names":["styles","css","CheckoutCompositionComponent","ComponentMixin","resolve","CheckoutDataService","CheckoutOrchestrationService","ContentController","CartService","AuthService","map","steps","_a","step","Validity","combineLatest","html","i18n","asyncValue","id","validity","isEmptyCart","isAuthenticated","isGuestCheckout","deliveryCompleted","options","testData","when","__decorate","subscribe","__metadata","hydratable"],"mappings":"4VACO,MAAMA,EAASC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,ECYnB,IAACC,EAA+B,cAA2CC,GAAiB,CAC3F,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,oBAAsBC,EAAQC,CAAmB,EACtD,KAAK,qBAAuBD,EAAQE,CAA4B,EAChE,KAAK,SAAW,IAAIC,EAAkB,IAAI,EAAE,WAAU,EACtD,KAAK,aAAeH,EAAQI,CAAW,EAAE,QAAO,EAChD,KAAK,iBAAmBJ,EAAQK,CAAW,EAAE,gBAAe,EAC5D,KAAK,iBAAmB,KAAK,oBAAoB,gBAAe,EAChE,KAAK,OAAS,KAAK,qBAAqB,YAAW,EACnD,KAAK,mBAAqB,KAAK,OAAO,KAAKC,EAAKC,GAAU,OACtD,QAAUC,EAAAD,EAAM,KAAME,GAASA,EAAK,KAAO,UAAU,IAA3C,YAAAD,EAA8C,YACpDE,EAAS,KAChB,CAAA,CAAC,EAEF,KAAK,UAAYC,EAAc,CAC3B,KAAK,oBAAoB,kBAAmB,EAC5C,KAAK,oBAAoB,kBAAmB,CACxD,CAAS,EACD,KAAK,UAAYA,EAAc,CAC3B,KAAK,aACL,KAAK,iBACL,KAAK,iBACL,KAAK,mBACL,KAAK,SACL,KAAK,SACjB,CAAS,CACJ,CACD,4BAA6B,CACzB,OAAOC;AAAAA;AAAAA,cAEDC,EAAK,yBAAyB;AAAA;AAAA;AAAA;AAAA,qBAIvB,IAAM,CACf,KAAK,oBAAoB,mBAAmB,EAAK,CAC7D;AAAA;AAAA,cAEcA,EAAK,+BAA+B;AAAA;AAAA;AAAA;AAAA,KAK7C,CACD,QAAS,CACL,OAAOD;AAAAA,QACPE,EAAW,KAAK,OAASP,GAAUK;AAAAA;AAAAA,cAE7BL,EAAM,IAAI,CAAC,CAAE,GAAAQ,EAAI,SAAAC,CAAQ,IAAOJ,SAAaG,MAAOC,SAAgB;AAAA;AAAA,SAEzE;AAAA,QACDF,EAAW,KAAK,UAAW,CAAC,CAACG,EAAaC,EAAiBC,EAAiBC,EAAmBC,EAASC,CAAQ,IACxGL,EACOL,IAELM,GAAmBC,EAUlBP;AAAAA,cACLW,EAAKJ,EAAiB,IAAMP,IAAQ,KAAK,8BAA8B;AAAA,cACvEW,EAAKH,EAAmB,IAAMR;AAAAA;AAAAA;AAAAA,oBAGxB,KAAK,UAAUU,EAAS,EAAE;AAAA;AAAA;AAAA;AAAA,oBAI1B,KAAK,UAAUA,EAAS,EAAE;AAAA;AAAA,gBAE7B,IAAMV,4CAAgD;AAAA,YApBhDA;AAAAA;AAAAA,qCAEc,IAAM,CACvB,KAAK,oBAAoB,oBAC7C;AAAA,2BAC2B,CAAE,aAAcS,EAAQ;;aAiB1C,GACJ,CACL,EACAvB,EAA6B,OAASF,EACtC4B,EAAW,CACPC,EAAW,EACXC,EAAW,cAAe,MAAM,CACpC,EAAG5B,EAA6B,UAAW,SAAU,MAAM,EAC3DA,EAA+B0B,EAAW,CACtCG,EAAwB,CAC5B,EAAG7B,CAA4B"}