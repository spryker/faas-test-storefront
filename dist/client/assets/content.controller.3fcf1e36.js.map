{"version":3,"file":"content.controller.3fcf1e36.js","sources":["../../../node_modules/@spryker-oryx/utilities/lit-rxjs/src/decorators/observe/observe.controller.js","../../../node_modules/@spryker-oryx/experience/src/controllers/content.controller.js"],"sourcesContent":["import { BehaviorSubject, defer } from 'rxjs';\nexport class ObserveController {\n    constructor(host) {\n        this.host = host;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.observablesMap = new Map();\n        (this.host = host).addController(this);\n    }\n    get(property) {\n        return defer(() => {\n            if (!this.observablesMap.has(property)) {\n                this.observablesMap.set(property, new BehaviorSubject(this.host[property]));\n            }\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const subject$ = this.observablesMap.get(property);\n            if (subject$.getValue() !== this.host[property]) {\n                subject$.next(this.host[property]);\n            }\n            return subject$;\n        });\n    }\n    hostUpdated() {\n        for (const [property, subject$] of this.observablesMap.entries()) {\n            if (this.host[property] !== subject$.getValue()) {\n                subject$.next(this.host[property]);\n            }\n        }\n    }\n}\n//# sourceMappingURL=observe.controller.js.map","import { resolve } from '@spryker-oryx/injector';\nimport { ObserveController } from '@spryker-oryx/utilities/lit-rxjs';\nimport { map, of, switchMap } from 'rxjs';\nimport { ExperienceService } from '../services';\nexport class ContentController {\n    constructor(host) {\n        this.host = host;\n        this.experienceContent = resolve(ExperienceService, null);\n        // TODO: fix property assigning outside of constructor, it doesn't work in the storybook now\n        this.observe = new ObserveController(host);\n    }\n    getContent() {\n        return this.observe.get('content').pipe(switchMap((content) => {\n            if (content !== undefined) {\n                return of(content);\n            }\n            return this.observe\n                .get('uid')\n                .pipe(switchMap((uid) => uid && this.experienceContent\n                ? this.experienceContent\n                    .getContent({ uid })\n                    .pipe(map((component) => component?.data))\n                : of(undefined)));\n        }));\n    }\n    getOptions() {\n        return this.observe.get('options').pipe(switchMap((options) => {\n            if (options !== undefined) {\n                return of(options);\n            }\n            return this.observe\n                .get('uid')\n                .pipe(switchMap((uid) => uid && this.experienceContent\n                ? this.experienceContent\n                    .getOptions({ uid })\n                    .pipe(map((component) => component?.data ?? {}))\n                : of({})));\n        }));\n    }\n}\n//# sourceMappingURL=content.controller.js.map"],"names":["ObserveController","host","property","defer","BehaviorSubject","subject$","ContentController","resolve","ExperienceService","switchMap","content","of","uid","map","component","options","_a"],"mappings":"kFACO,MAAMA,CAAkB,CAC3B,YAAYC,EAAM,CACd,KAAK,KAAOA,EAEZ,KAAK,eAAiB,IAAI,KACzB,KAAK,KAAOA,GAAM,cAAc,IAAI,CACxC,CACD,IAAIC,EAAU,CACV,OAAOC,EAAM,IAAM,CACV,KAAK,eAAe,IAAID,CAAQ,GACjC,KAAK,eAAe,IAAIA,EAAU,IAAIE,EAAgB,KAAK,KAAKF,EAAS,CAAC,EAG9E,MAAMG,EAAW,KAAK,eAAe,IAAIH,CAAQ,EACjD,OAAIG,EAAS,SAAU,IAAK,KAAK,KAAKH,IAClCG,EAAS,KAAK,KAAK,KAAKH,EAAS,EAE9BG,CACnB,CAAS,CACJ,CACD,aAAc,CACV,SAAW,CAACH,EAAUG,CAAQ,IAAK,KAAK,eAAe,UAC/C,KAAK,KAAKH,KAAcG,EAAS,SAAQ,GACzCA,EAAS,KAAK,KAAK,KAAKH,EAAS,CAG5C,CACL,CCxBO,MAAMI,CAAkB,CAC3B,YAAYL,EAAM,CACd,KAAK,KAAOA,EACZ,KAAK,kBAAoBM,EAAQC,EAAmB,IAAI,EAExD,KAAK,QAAU,IAAIR,EAAkBC,CAAI,CAC5C,CACD,YAAa,CACT,OAAO,KAAK,QAAQ,IAAI,SAAS,EAAE,KAAKQ,EAAWC,GAC3CA,IAAY,OACLC,EAAGD,CAAO,EAEd,KAAK,QACP,IAAI,KAAK,EACT,KAAKD,EAAWG,GAAQA,GAAO,KAAK,kBACnC,KAAK,kBACF,WAAW,CAAE,IAAAA,EAAK,EAClB,KAAKC,EAAKC,GAAcA,GAAA,YAAAA,EAAW,IAAI,CAAC,EAC3CH,EAAG,MAAS,CAAC,CAAC,CACvB,CAAC,CACL,CACD,YAAa,CACT,OAAO,KAAK,QAAQ,IAAI,SAAS,EAAE,KAAKF,EAAWM,GAC3CA,IAAY,OACLJ,EAAGI,CAAO,EAEd,KAAK,QACP,IAAI,KAAK,EACT,KAAKN,EAAWG,GAAQA,GAAO,KAAK,kBACnC,KAAK,kBACF,WAAW,CAAE,IAAAA,EAAK,EAClB,KAAKC,EAAKC,GAAc,OAAA,OAAAE,EAAAF,GAAA,YAAAA,EAAW,OAAX,KAAAE,EAAmB,CAAA,EAAE,CAAC,EACjDL,EAAG,CAAA,CAAE,CAAC,CAAC,CAChB,CAAC,CACL,CACL"}