import{r as s,j as g,m as c,y as n,f as S,_ as h,h as f,aw as x}from"./index-41c5945f.js";import{C as $}from"./content.controller-bfde8771.js";import{P as y}from"./product.controller-987132f0.js";import{P}from"./product.mixin-b8d036c1.js";import"./context.controller-8c8608f3.js";import"./component.mixin-da8e468a.js";let l=class extends P(){constructor(){super(...arguments),this.imageService=s(x),this.productMedia$=g([new $(this).getOptions(),new y(this).getProduct()]).pipe(c(([e,a])=>{var m;const t=this.resolveImage(a,e),r=this.imageService.resolveSources(t,(e==null?void 0:e.containerSize)??"detail");return{src:(m=r==null?void 0:r[0])==null?void 0:m.url,alt:(e==null?void 0:e.alt)||(a==null?void 0:a.name),srcset:this.getSrcSet(r),loading:e==null?void 0:e.loading}}))}render(){return n`${S(this.productMedia$,e=>n`<oryx-image
          .src=${e.src}
          .srcset=${e.srcset}
          .alt=${e.alt}
          .loading=${e.loading??"lazy"}
        ></oryx-image>`)}`}resolveImage(e,a){var r,m,i;const t=a.mediaSet?(m=e==null?void 0:e.mediaSet)==null?void 0:m.find(d=>d.name===a.mediaSet):(r=e==null?void 0:e.mediaSet)==null?void 0:r[0];return(i=t==null?void 0:t.media)==null?void 0:i[(a==null?void 0:a.mediaIndex)??0]}getSrcSet(e){if(!(e.length<2))return e.map(a=>{var t,r;return(t=a.context)!=null&&t.density?`${a.url} ${(r=a.context)==null?void 0:r.density}x`:void 0}).filter(a=>a).join(",")||void 0}};l=h([f()],l);export{l as ProductMediaComponent};
