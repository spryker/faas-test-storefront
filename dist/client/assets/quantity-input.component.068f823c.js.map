{"version":3,"file":"quantity-input.component.068f823c.js","sources":["../../../node_modules/@spryker-oryx/cart/quantity-input/src/quantity-input.model.js","../../../node_modules/@spryker-oryx/cart/quantity-input/src/quantity-input.component.js"],"sourcesContent":["export const UPDATE_EVENT = 'update';\nexport const SUBMIT_EVENT = 'submit';\n//# sourceMappingURL=quantity-input.model.js.map","import { __decorate, __metadata } from \"tslib\";\nimport { IconTypes } from '@spryker-oryx/themes/icons';\nimport { hydratable } from '@spryker-oryx/utilities';\nimport { i18n } from '@spryker-oryx/utilities/i18n';\nimport { html, LitElement } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { createRef, ref } from 'lit/directives/ref.js';\nimport { SUBMIT_EVENT, UPDATE_EVENT, } from './quantity-input.model';\nimport { styles } from './quantity-input.styles';\n/**\n * The quantity input component provides controls to conveniently increase and\n * decrease the quantity. The component is typically used to change the quantity\n * of a cart item, but it can be used in any context.\n *\n * The html min, max and step attribute are used on the input component, so that\n * the quantity stays in the appropriate boundaries and increases with the right step.\n *\n * The quantity control dispatches an update or submit event. The submit event will be\n * dispatched when the Enter key is dispatched, To submit on each change even, the\n * `submitOnChange` property can be set.\n */\nlet QuantityInputComponent = class QuantityInputComponent extends LitElement {\n    constructor() {\n        super(...arguments);\n        this.min = 1;\n        this.step = 1;\n        this.submitOnChange = false;\n        this.disabled = false;\n        this.hasError = false;\n        this.inputRef = createRef();\n    }\n    render() {\n        return html `\n      <button\n        @click=${this.decrease}\n        aria-label=${i18n('cart.quantity.decrease')}\n        tabindex=\"-1\"\n        ?disabled=${this.isMinDisabled()}\n        part=\"decrease\"\n      >\n        <oryx-icon .type=${IconTypes.Decrease}></oryx-icon>\n      </button>\n      <oryx-input ?hasError=${this.hasError}>\n        <input\n          ${ref(this.inputRef)}\n          aria-label=${i18n('cart.quantity')}\n          type=\"number\"\n          value=${this.getValue()}\n          min=${ifDefined(this.min)}\n          max=${ifDefined(this.max)}\n          step=${this.step}\n          required\n          ?disabled=${this.disabled ||\n            (this.max !== undefined && this.max === 0)}\n          @input=${this.onInput}\n          @change=${this.onChange}\n          @keydown=${this.onKeydown}\n          @focus=${this.onFocus}\n        />\n      </oryx-input>\n      <button\n        @click=${this.increase}\n        aria-label=${i18n('cart.quantity.increase')}\n        tabindex=\"-1\"\n        ?disabled=${this.isMaxDisabled()}\n        part=\"increase\"\n      >\n        <oryx-icon .type=${IconTypes.Increase}></oryx-icon>\n      </button>\n    `;\n    }\n    focus() {\n        this.input?.focus();\n    }\n    firstUpdated() {\n        this.checkValidity();\n    }\n    getValue() {\n        return this.value?.toString() ?? this.min?.toString() ?? '1';\n    }\n    onFocus() {\n        this.checkValidity();\n    }\n    isMinDisabled() {\n        return (this.disabled || (this.value !== undefined && this.value <= this.min));\n    }\n    isMaxDisabled() {\n        return (this.disabled ||\n            (this.value !== undefined &&\n                this.max !== undefined &&\n                this.value >= this.max));\n    }\n    /**\n     * Increases the input value by a single step\n     * and triggers the change event.\n     *\n     * The step is configurable.\n     */\n    increase() {\n        this.input.stepUp();\n        this.onChange();\n    }\n    /**\n     * Decreases the input value by a single step\n     * and triggers the change event.\n     *\n     * The step is configurable.\n     */\n    decrease() {\n        this.input.stepDown();\n        this.onChange();\n    }\n    /**\n     * Updates the value.\n     *\n     * Triggers validity reporting so that native browser validation appears.\n     */\n    onInput(e) {\n        this.updateValue(e.target.value);\n        this.dispatch(UPDATE_EVENT);\n    }\n    /**\n     * Dispatches an update event\n     */\n    onChange() {\n        this.updateValue();\n        if (this.submitOnChange && this.input.validity.valid) {\n            this.dispatch(SUBMIT_EVENT);\n        }\n        else {\n            this.dispatch(UPDATE_EVENT);\n        }\n    }\n    updateValue(value) {\n        this.value = Number(value ?? this.input.value);\n        this.checkValidity();\n    }\n    checkValidity() {\n        this.hasError = !this.input.reportValidity();\n    }\n    /**\n     * Dispatches a submit event when the Enter key is triggered\n     * and the input is valid.\n     *\n     * When the input is invalid, we'll trigger a report on the validity\n     * so that the user understands why the input is not submitted.\n     */\n    onKeydown(ev) {\n        if (ev.key !== 'Enter') {\n            return;\n        }\n        if (this.input.validity.valid) {\n            this.dispatch(SUBMIT_EVENT);\n        }\n        else {\n            this.checkValidity();\n        }\n    }\n    dispatch(eventName) {\n        const detail = { quantity: Number(this.input.value) };\n        if (!this.input.validity.valid) {\n            detail.isInvalid = true;\n        }\n        this.dispatchEvent(new CustomEvent(eventName, { detail, bubbles: true, composed: true }));\n    }\n    get input() {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        return this.inputRef.value;\n    }\n};\nQuantityInputComponent.styles = styles;\n__decorate([\n    property({ type: Number }),\n    __metadata(\"design:type\", Object)\n], QuantityInputComponent.prototype, \"min\", void 0);\n__decorate([\n    property({ type: Number }),\n    __metadata(\"design:type\", Number)\n], QuantityInputComponent.prototype, \"value\", void 0);\n__decorate([\n    property({ type: Number }),\n    __metadata(\"design:type\", Number)\n], QuantityInputComponent.prototype, \"max\", void 0);\n__decorate([\n    property({ type: Number }),\n    __metadata(\"design:type\", Object)\n], QuantityInputComponent.prototype, \"step\", void 0);\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Object)\n], QuantityInputComponent.prototype, \"submitOnChange\", void 0);\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Object)\n], QuantityInputComponent.prototype, \"disabled\", void 0);\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Object)\n], QuantityInputComponent.prototype, \"hasError\", void 0);\nQuantityInputComponent = __decorate([\n    hydratable(['window:load'])\n], QuantityInputComponent);\nexport { QuantityInputComponent };\n//# sourceMappingURL=quantity-input.component.js.map"],"names":["UPDATE_EVENT","SUBMIT_EVENT","QuantityInputComponent","LitElement","createRef","html","i18n","IconTypes","ref","ifDefined","_a","_d","_c","_b","e","value","ev","eventName","detail","styles","__decorate","property","__metadata","hydratable"],"mappings":"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"}