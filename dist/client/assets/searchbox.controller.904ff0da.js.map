{"version":3,"file":"searchbox.controller.904ff0da.js","sources":["../../../node_modules/@spryker-oryx/ui/search/searchbox/src/searchbox.controller.js"],"sourcesContent":["import { AffixController } from '@spryker-oryx/ui/input';\nimport { html } from 'lit';\nimport { getControl } from '../../../form/utilities';\nexport class SearchboxController {\n    constructor(host) {\n        this.host = host;\n        this.host.addController(this);\n        this.affixController = new AffixController(host);\n        this.handleInputValue = this.handleInputValue.bind(this);\n        this.handleKeyEvent = this.handleKeyEvent.bind(this);\n    }\n    hostConnected() {\n        this.host.addEventListener('input', this.handleInputValue);\n        this.host.addEventListener('change', this.handleInputValue);\n        this.host.addEventListener('keydown', this.handleKeyEvent);\n    }\n    hostDisconnected() {\n        this.host.removeEventListener('input', this.handleInputValue);\n        this.host.removeEventListener('change', this.handleInputValue);\n        this.host.removeEventListener('keydown', this.handleKeyEvent);\n    }\n    renderPrefix() {\n        return this.affixController.renderPrefix(this.prefixContent);\n    }\n    renderSuffix() {\n        const { clearIconPosition } = this.host;\n        if (!clearIconPosition || clearIconPosition === \"AFTER\" /* ClearIconPosition.AFTER */) {\n            return html `${this.clearButton}${this.affixController.renderSuffix(this.suffixContent)}`;\n        }\n        else {\n            return html `${this.affixController.renderSuffix(this.suffixContent)}`;\n        }\n    }\n    /**\n     * Renders the prefix content for the search control.\n     *\n     * Adds the search button at the start of the search control when the\n     * `options.searchIconPosition` is set to 'PREFIX'.\n     */\n    get prefixContent() {\n        let content;\n        const { searchIconPosition: pos } = this.host;\n        if (!pos || pos === \"PREFIX\" /* SearchIconPosition.PREFIX */) {\n            content = this.searchButton;\n        }\n        return content;\n    }\n    /**\n     * Renders the suffix content for the search control.\n     *\n     * Adds the clear button after the search control or inside the suffix.\n     * Adds the search button at the end of the search control when the\n     * `options.searchIconPosition` is set to 'SUFFIX'.\n     */\n    get suffixContent() {\n        const { searchIconPosition: searchPos, clearIconPosition: clearPos } = this.host;\n        const clearContent = clearPos === \"SUFFIX\" /* ClearIconPosition.SUFFIX */ ? this.clearButton : undefined;\n        const searchContent = searchPos === \"SUFFIX\" /* SearchIconPosition.SUFFIX */ ? this.searchButton : undefined;\n        if (!clearContent && !searchContent) {\n            return;\n        }\n        return html `${clearContent}${searchContent}`;\n    }\n    get searchButton() {\n        const { searchIcon: icon = 'search' } = this.host;\n        const search = html `\n      <oryx-icon\n        type=${icon}\n        class=\"search\"\n        @click=${() => this.search()}\n      ></oryx-icon>\n    `;\n        return html `${search}`;\n    }\n    get clearButton() {\n        const { clearIcon: icon = 'remove', clearIconAppearance } = this.host;\n        return html `\n      <oryx-icon\n        type=${icon}\n        class=\"clear\"\n        appearance=${clearIconAppearance ?? \"TOGGLE\" /* ClearIconAppearance.TOGGLE */}\n        @mousedown=${(e) => this.muteEvents(e)}\n        @click=${(ev) => this.clear(ev)}\n      ></oryx-icon>\n    `;\n    }\n    muteEvents(e) {\n        if (this.control.value !== '') {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    }\n    get control() {\n        return getControl(this.host);\n    }\n    hostUpdated() {\n        this.handleInputValue();\n    }\n    search() {\n        const event = new CustomEvent('oryx.search', {\n            detail: {\n                query: this.control.value,\n            },\n            bubbles: true,\n            composed: true,\n        });\n        this.host.dispatchEvent(event);\n    }\n    clear(e) {\n        if (this.control.value !== '') {\n            e.stopPropagation();\n            this.control.value = '';\n            this.control.dispatchEvent(new InputEvent('input', {\n                bubbles: true,\n                composed: true,\n                inputType: 'deleteContentBackward',\n            }));\n            this.control.dispatchEvent(new Event('change', { bubbles: true, composed: true }));\n            this.control.focus();\n        }\n    }\n    handleKeyEvent(ev) {\n        if (ev.key === 'Enter') {\n            this.search();\n        }\n    }\n    handleInputValue() {\n        this.host.toggleAttribute('has-value', this.control.value !== '');\n    }\n}\n//# sourceMappingURL=searchbox.controller.js.map"],"names":["SearchboxController","host","AffixController","clearIconPosition","html","content","pos","searchPos","clearPos","clearContent","searchContent","icon","search","clearIconAppearance","e","ev","getControl","event"],"mappings":"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"}