{"version":3,"file":"media.component.506b3c88.js","sources":["../../../node_modules/@spryker-oryx/product/media/src/media.component.js"],"sourcesContent":["import { __decorate } from \"tslib\";\nimport { ContentController } from '@spryker-oryx/experience';\nimport { resolve } from '@spryker-oryx/injector';\nimport { ProductComponentMixin, ProductController, ProductImageService, } from '@spryker-oryx/product';\nimport { hydratable } from '@spryker-oryx/utilities';\nimport { asyncValue } from '@spryker-oryx/utilities/lit-rxjs';\nimport { html } from 'lit';\nimport { combineLatest, map } from 'rxjs';\nlet ProductMediaComponent = class ProductMediaComponent extends ProductComponentMixin() {\n    constructor() {\n        super(...arguments);\n        this.imageService = resolve(ProductImageService);\n        this.productMedia$ = combineLatest([\n            new ContentController(this).getOptions(),\n            new ProductController(this).getProduct(),\n        ]).pipe(map(([options, product]) => {\n            const image = this.resolveImage(product, options);\n            const sources = this.imageService.resolveSources(image, options?.containerSize ?? \"detail\" /* ProductMediaContainerSize.Detail */);\n            return {\n                src: sources?.[0]?.url,\n                alt: options?.alt || product?.name,\n                srcset: this.getSrcSet(sources),\n                loading: options?.loading,\n            };\n        }));\n    }\n    render() {\n        return html `${asyncValue(this.productMedia$, (image) => {\n            return html `<oryx-image\n          .src=${image.src}\n          .srcset=${image.srcset}\n          .alt=${image.alt}\n          .loading=${image.loading ?? \"lazy\" /* LoadingStrategy.Lazy */}\n        ></oryx-image>`;\n        })}`;\n    }\n    resolveImage(product, options) {\n        const set = !options.mediaSet\n            ? product?.mediaSet?.[0]\n            : product?.mediaSet?.find((set) => set.name === options.mediaSet);\n        return set?.media?.[options?.mediaIndex ?? 0];\n    }\n    getSrcSet(sources) {\n        if (sources.length < 2) {\n            return;\n        }\n        return (sources\n            .map((source) => source.context?.density\n            ? `${source.url} ${source.context?.density}x`\n            : undefined)\n            .filter((s) => s)\n            .join(',') || undefined);\n    }\n};\nProductMediaComponent = __decorate([\n    hydratable('mouseover')\n], ProductMediaComponent);\nexport { ProductMediaComponent };\n//# sourceMappingURL=media.component.js.map"],"names":["ProductMediaComponent","ProductComponentMixin","resolve","ProductImageService","combineLatest","ContentController","ProductController","map","options","product","image","sources","_a","_b","html","asyncValue","set","_d","_c","source","s","__decorate","hydratable"],"mappings":"8TAQG,IAACA,EAAwB,cAAoCC,GAAwB,CACpF,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,aAAeC,EAAQC,CAAmB,EAC/C,KAAK,cAAgBC,EAAc,CAC/B,IAAIC,EAAkB,IAAI,EAAE,WAAY,EACxC,IAAIC,EAAkB,IAAI,EAAE,WAAY,CACpD,CAAS,EAAE,KAAKC,EAAI,CAAC,CAACC,EAASC,CAAO,IAAM,SAChC,MAAMC,EAAQ,KAAK,aAAaD,EAASD,CAAO,EAC1CG,EAAU,KAAK,aAAa,eAAeD,GAAOE,EAAAJ,GAAA,YAAAA,EAAS,gBAAT,KAAAI,EAA0B,UAClF,MAAO,CACH,KAAKC,EAAAF,GAAA,YAAAA,EAAU,KAAV,YAAAE,EAAc,IACnB,KAAKL,GAAA,YAAAA,EAAS,OAAOC,GAAA,YAAAA,EAAS,MAC9B,OAAQ,KAAK,UAAUE,CAAO,EAC9B,QAASH,GAAA,YAAAA,EAAS,OAClC,CACS,CAAA,CAAC,CACL,CACD,QAAS,CACL,OAAOM,IAAQC,EAAW,KAAK,cAAgBL,GAAU,OACrD,OAAOI;AAAAA,iBACFJ,EAAM;AAAA,oBACHA,EAAM;AAAA,iBACTA,EAAM;AAAA,sBACFE,EAAAF,EAAM,UAAN,KAAAE,EAAiB;AAAA,uBAE7B,CAAA,GACJ,CACD,aAAaH,EAASD,EAAS,aAC3B,MAAMQ,EAAOR,EAAQ,UAEfK,EAAAJ,GAAA,YAAAA,EAAS,WAAT,YAAAI,EAAmB,KAAMG,GAAQA,EAAI,OAASR,EAAQ,WADtDI,EAAAH,GAAA,YAAAA,EAAS,WAAT,YAAAG,EAAoB,GAE1B,OAAOK,EAAAD,GAAA,YAAAA,EAAK,QAAL,YAAAC,GAAaC,EAAAV,GAAA,YAAAA,EAAS,aAAT,KAAAU,EAAuB,EAC9C,CACD,UAAUP,EAAS,CACf,GAAI,EAAAA,EAAQ,OAAS,GAGrB,OAAQA,EACH,IAAKQ,YAAW,OAAAP,EAAAO,EAAO,UAAP,MAAAP,EAAgB,QAC/B,GAAGO,EAAO,QAAON,EAAAM,EAAO,UAAP,YAAAN,EAAgB,WACjC,OAAS,EACV,OAAQO,GAAMA,CAAC,EACf,KAAK,GAAG,GAAK,MACrB,CACL,EACApB,EAAwBqB,EAAW,CAC/BC,EAAsB,CAC1B,EAAGtB,CAAqB"}