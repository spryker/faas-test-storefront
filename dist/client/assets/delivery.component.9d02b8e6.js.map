{"version":3,"file":"delivery.component.9d02b8e6.js","sources":["../../../node_modules/@spryker-oryx/checkout/delivery/src/delivery.styles.js","../../../node_modules/@spryker-oryx/checkout/delivery/src/delivery.component.js"],"sourcesContent":["import { css } from 'lit';\nexport const styles = css `\n  section {\n    margin-block-end: 30px;\n  }\n`;\n//# sourceMappingURL=delivery.styles.js.map","import { __decorate, __metadata } from \"tslib\";\nimport { AuthService } from '@spryker-oryx/auth';\nimport { CheckoutOrchestrationService, CheckoutSteps, CheckoutTrigger, } from '@spryker-oryx/checkout';\nimport { ComponentMixin } from '@spryker-oryx/experience';\nimport { resolve } from '@spryker-oryx/injector';\nimport { i18n } from '@spryker-oryx/utilities/i18n';\nimport { asyncValue, subscribe } from '@spryker-oryx/utilities/lit-rxjs';\nimport { html } from 'lit';\nimport { when } from 'lit/directives/when.js';\nimport { tap } from 'rxjs';\nimport { styles } from './delivery.styles';\nexport class CheckoutDeliveryComponent extends ComponentMixin() {\n    constructor() {\n        super(...arguments);\n        this.isAuthenticated$ = resolve(AuthService).isAuthenticated();\n        this.orchestrationService = resolve(CheckoutOrchestrationService);\n        this.submitTrigger$ = this.orchestrationService\n            .getTrigger(CheckoutSteps.Delivery)\n            .pipe(tap((trigger) => {\n            console.log(trigger);\n            if (trigger === CheckoutTrigger.Check) {\n                this.checkAndSubmit();\n            }\n            if (trigger === CheckoutTrigger.Report) {\n                this.report();\n            }\n        }));\n    }\n    get forms() {\n        return this.renderRoot.querySelectorAll('section > *');\n    }\n    checkAndSubmit() {\n        let isValid = true;\n        for (const form of this.forms) {\n            if (!form.submit()) {\n                isValid = false;\n            }\n        }\n        this.orchestrationService.report(CheckoutSteps.Delivery, isValid);\n    }\n    report() {\n        for (const form of this.forms) {\n            if (!form.submit(true)) {\n                break;\n            }\n        }\n    }\n    render() {\n        return html `${asyncValue(this.isAuthenticated$, (isAuthenticated) => html `\n        <h3>${i18n('checkout.delivery-details')}</h3>\n\n        <section>\n          ${when(!isAuthenticated, () => html `<checkout-contact></checkout-contact>`)}\n          <checkout-address></checkout-address>\n        </section>\n\n        <oryx-button>\n          <button\n            @click=${() => this.orchestrationService.submit(CheckoutSteps.Delivery)}\n          >\n            ${i18n('checkout.use-this-address')}\n          </button>\n        </oryx-button>\n      `)}`;\n    }\n}\nCheckoutDeliveryComponent.styles = styles;\n__decorate([\n    subscribe(),\n    __metadata(\"design:type\", Object)\n], CheckoutDeliveryComponent.prototype, \"submitTrigger$\", void 0);\n//# sourceMappingURL=delivery.component.js.map"],"names":["styles","css","CheckoutDeliveryComponent","ComponentMixin","resolve","AuthService","CheckoutOrchestrationService","CheckoutSteps","tap","trigger","CheckoutTrigger","isValid","form","html","asyncValue","isAuthenticated","i18n","when","__decorate","subscribe","__metadata"],"mappings":"uQACO,MAAMA,EAASC;AAAAA;AAAAA;AAAAA;AAAAA,ECUf,MAAMC,UAAkCC,EAAc,CAAG,CAC5D,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,iBAAmBC,EAAQC,CAAW,EAAE,gBAAe,EAC5D,KAAK,qBAAuBD,EAAQE,CAA4B,EAChE,KAAK,eAAiB,KAAK,qBACtB,WAAWC,EAAc,QAAQ,EACjC,KAAKC,EAAKC,GAAY,CACvB,QAAQ,IAAIA,CAAO,EACfA,IAAYC,EAAgB,OAC5B,KAAK,eAAc,EAEnBD,IAAYC,EAAgB,QAC5B,KAAK,OAAM,CAElB,CAAA,CAAC,CACL,CACD,IAAI,OAAQ,CACR,OAAO,KAAK,WAAW,iBAAiB,aAAa,CACxD,CACD,gBAAiB,CACb,IAAIC,EAAU,GACd,UAAWC,KAAQ,KAAK,MACfA,EAAK,WACND,EAAU,IAGlB,KAAK,qBAAqB,OAAOJ,EAAc,SAAUI,CAAO,CACnE,CACD,QAAS,CACL,UAAWC,KAAQ,KAAK,MACpB,GAAI,CAACA,EAAK,OAAO,EAAI,EACjB,KAGX,CACD,QAAS,CACL,OAAOC,IAAQC,EAAW,KAAK,iBAAmBC,GAAoBF;AAAAA,cAChEG,EAAK,2BAA2B;AAAA;AAAA;AAAA,YAGlCC,EAAK,CAACF,EAAiB,IAAMF,wCAA4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAMhE,IAAM,KAAK,qBAAqB,OAAON,EAAc,QAAQ;AAAA;AAAA,cAEpES,EAAK,2BAA2B;AAAA;AAAA;AAAA,OAGvC,GACF,CACL,CACAd,EAA0B,OAASF,EACnCkB,EAAW,CACPC,EAAW,EACXC,EAAW,cAAe,MAAM,CACpC,EAAGlB,EAA0B,UAAW,iBAAkB,MAAM"}