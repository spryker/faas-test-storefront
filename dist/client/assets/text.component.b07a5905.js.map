{"version":3,"file":"text.component.b07a5905.js","sources":["../../../node_modules/@spryker-oryx/core/src/directives/prehydrate.js","../../../node_modules/@spryker-oryx/ui/structure/text/src/prehydrate.js","../../../node_modules/@spryker-oryx/ui/structure/text/src/text.styles.js","../../../node_modules/@spryker-oryx/ui/structure/text/src/text.component.js"],"sourcesContent":["import { isServer } from 'lit';\nimport { Directive, directive } from 'lit/directive.js';\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\nimport { html } from 'lit/static-html.js';\nimport { dryLogic } from './dry-logic';\nconst components = {};\n/**\n * Directive is used to inline javascript snippet with Server Side Rendered component.\n * Because of obvious overhead, it's intended to efficiently fix component rendering in order\n * to provide correct UI for not hydrated component but also to minimize UI changes and LCP metric.\n *\n * - dryFunction: code intended to fix SSR markup. At runtime, it will receive element instance and will\n *   be invoked for every element\n * - tag: element's tag name (currently required, to make the logic work)\n */\nclass PrehydrateDirective extends Directive {\n    render(dryFunction, tag) {\n        if (!isServer) {\n            return html ``;\n        }\n        if (components[tag]) {\n            return html `${unsafeHTML(`<script>__dryFn('${tag}');</script>`)}`;\n        }\n        const first = Object.keys(components).length == 0;\n        components[tag] = true;\n        return html `${unsafeHTML(`<script>${first ? `const __dryFn=(${dryLogic.toString()})();` : ''}__dryFn('${tag}', ${dryFunction.toString()});</script>`)}`;\n    }\n}\nexport const prehydrate = directive(PrehydrateDirective);\n//# sourceMappingURL=prehydrate.js.map","export const truncateFix = async (host) => {\n    const container = host.shadowRoot?.querySelector('div > *');\n    const lineClampValue = Number(getComputedStyle(host).getPropertyValue('--line-clamp'));\n    if (container && lineClampValue > 0) {\n        const lineHeight = container.style.lineHeight;\n        const factor = 1000;\n        container.style.lineHeight = `${factor}px`;\n        const height = container.getBoundingClientRect().height;\n        container.style.lineHeight = lineHeight;\n        const linesCount = Math.floor(height / factor);\n        host.style.setProperty('--lines-count', String(linesCount));\n        if (linesCount <= lineClampValue) {\n            return;\n        }\n        const isDefaultExpanded = host.hasAttribute('defaultExpanded');\n        host.toggleAttribute('truncated', !isDefaultExpanded);\n        host.toggleAttribute('truncation', true);\n    }\n};\n//# sourceMappingURL=prehydrate.js.map","import { css } from 'lit';\nexport const textStyles = css `\n  :host {\n    --_text-line-clamp: var(--line-clamp, 0);\n\n    display: flex;\n    flex-direction: column;\n  }\n\n  ::slotted(p) {\n    margin-top: 0;\n    transition: margin-bottom 0.8s cubic-bezier(0, 1, 0, 1);\n  }\n\n  :host([truncation]) div {\n    overflow: hidden;\n  }\n\n  :host([truncation][truncated]) ::slotted(p) {\n    display: inline;\n  }\n\n  :host([truncation][truncated]) ::slotted(p)::after {\n    content: ' ';\n  }\n\n  :host([truncation][truncated]) div {\n    max-height: calc(var(--_text-line-clamp) * var(--oryx-line-height, 24px));\n    transition: max-height var(--oryx-transition-time) cubic-bezier(0, 1, 0, 1);\n  }\n\n  :host(:not([truncated])) div {\n    max-height: calc(\n      var(--lines-count, 100rem) * var(--oryx-line-height, 24px)\n    );\n    transition: max-height var(--oryx-transition-time) ease-out;\n  }\n\n  slot:not([name]) {\n    display: block;\n  }\n\n  :host([truncated]) slot:not([name]) {\n    /* stylelint-disable-next-line */\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: var(--_text-line-clamp);\n    line-clamp: var(--_text-line-clamp);\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n\n  :host([initialized][truncated]) slot:not([name]) {\n    animation: close 0.1s ease 0.1s forwards;\n    -webkit-line-clamp: initial;\n    line-clamp: initial;\n  }\n\n  /* stylelint-disable-next-line */\n  @media (min-resolution: 0.001dpcm) {\n    @supports (-webkit-appearance: none) and (stroke-color: transparent) {\n      :host([initialized][truncated]) slot:not([name]) {\n        /* this won't function on safari */\n        -webkit-line-clamp: var(--_text-line-clamp);\n      }\n    }\n  }\n\n  :host(:not([truncated])) {\n    animation: open 0.1s ease 0s forwards;\n  }\n\n  oryx-icon-button {\n    display: inline-flex;\n    align-self: center;\n    margin: 10px 0;\n    transition: transform var(--oryx-transition-time-long) ease-in-out;\n    color: var(--oryx-color-primary-300);\n  }\n\n  :host(:not([truncated])) oryx-icon-button {\n    transform: rotate(180deg);\n  }\n\n  /* FF won't render line-clamp properly wen there's not wrapping block element surrounding \n   * various child elements. This breaks Safari, hence we limit this behaviour only to FF. */\n  @supports (-moz-appearance: none) {\n    slot:not([name]) {\n      display: block;\n    }\n  }\n\n  :host(:not([truncation])) slot[name='toggle'] {\n    display: none;\n  }\n\n  @keyframes open {\n    from {\n      line-clamp: var(--_text-line-clamp);\n      -webkit-line-clamp: var(--_text-line-clamp);\n    }\n    to {\n      line-clamp: initial;\n      -webkit-line-clamp: initial;\n    }\n  }\n\n  @keyframes close {\n    from {\n      line-clamp: initial;\n      -webkit-line-clamp: initial;\n    }\n    to {\n      line-clamp: var(--_text-line-clamp);\n      -webkit-line-clamp: var(--_text-line-clamp);\n    }\n  }\n`;\n//# sourceMappingURL=text.styles.js.map","import { __decorate, __metadata } from \"tslib\";\nimport { prehydrate } from '@spryker-oryx/core';\nimport { throttle } from '@spryker-oryx/utilities/typescript';\nimport { LitElement } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { createRef, ref } from 'lit/directives/ref.js';\nimport { when } from 'lit/directives/when.js';\nimport { html } from 'lit/static-html.js';\nimport { truncateFix } from './prehydrate';\nimport { textStyles } from './text.styles';\nexport class TextComponent extends LitElement {\n    constructor() {\n        super(...arguments);\n        this.hideToggle = false;\n        this.truncated = false;\n        this.truncation = false;\n        this.readMoreLabel = 'Read more';\n        this.containerRef = createRef();\n    }\n    disconnectedCallback() {\n        this.resizeObserver?.disconnect();\n        super.disconnectedCallback();\n    }\n    get container() {\n        return this.containerRef?.value;\n    }\n    get shouldBeTruncated() {\n        return !!Number(getComputedStyle(this).getPropertyValue('--line-clamp'));\n    }\n    render() {\n        return html `\n      <div ${ref(this.containerRef)}>\n        <slot @slotchange=${this.setup.bind(this)}></slot>\n      </div>\n      ${when(!this.hideToggle, () => html ` <slot name=\"toggle\">\n          <oryx-icon-button size=\"small\">\n            <button aria-label=${this.readMoreLabel} @click=\"${this.toggle}\">\n              <oryx-icon type=\"dropdown\"></oryx-icon>\n            </button>\n          </oryx-icon-button>\n        </slot>`)}\n      ${prehydrate(truncateFix, 'oryx-text')}\n    `;\n    }\n    setup() {\n        if (!this.shouldBeTruncated) {\n            return;\n        }\n        this.truncation = true;\n        this.truncated = !this.defaultExpanded;\n        this.resizeObserver = new ResizeObserver(throttle(() => window.requestAnimationFrame(this.onResize.bind(this)), 100));\n        this.resizeObserver.observe(this.container);\n    }\n    onResize() {\n        if (!this.shouldBeTruncated) {\n            this.truncation = false;\n        }\n        const linesCount = this.calcLinesCount(this.container.children[0]);\n        this.style.setProperty('--lines-count', String(linesCount));\n    }\n    toggle() {\n        this.toggleAttribute('initialized', true);\n        this.truncated = !this.truncated;\n    }\n    calcLinesCount(element) {\n        const lineHeight = element.style.lineHeight;\n        const factor = 1000;\n        element.style.lineHeight = `${factor}px`;\n        const height = element.getBoundingClientRect().height;\n        element.style.lineHeight = lineHeight;\n        return Math.floor(height / factor);\n    }\n}\nTextComponent.styles = textStyles;\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Object)\n], TextComponent.prototype, \"hideToggle\", void 0);\n__decorate([\n    property({ type: Boolean, reflect: true }),\n    __metadata(\"design:type\", Object)\n], TextComponent.prototype, \"truncated\", void 0);\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Boolean)\n], TextComponent.prototype, \"defaultExpanded\", void 0);\n__decorate([\n    property({ type: Boolean, reflect: true }),\n    __metadata(\"design:type\", Object)\n], TextComponent.prototype, \"truncation\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", Object)\n], TextComponent.prototype, \"readMoreLabel\", void 0);\n//# sourceMappingURL=text.component.js.map"],"names":["PrehydrateDirective","Directive","dryFunction","tag","html","prehydrate","directive","truncateFix","host","container","_a","lineClampValue","lineHeight","factor","height","linesCount","isDefaultExpanded","textStyles","css","TextComponent","LitElement","createRef","ref","when","throttle","element","__decorate","property","__metadata"],"mappings":"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"}