{"version":3,"file":"select.component.6c714043.js","sources":["../../../node_modules/@spryker-oryx/ui/form/select/src/controllers/select-filter.controller.js","../../../node_modules/@spryker-oryx/ui/form/select/src/controllers/select.controller.js","../../../node_modules/@spryker-oryx/ui/form/select/src/select.component.js"],"sourcesContent":["import { html } from 'lit';\nimport { when } from 'lit/directives/when.js';\nimport { getControl } from '../../../utilities';\nexport class SelectFilterController {\n    constructor(host) {\n        this.host = host;\n        this.initialized = false;\n        this.host.addController(this);\n        this.onUpdate = this.onUpdate.bind(this);\n        this.onFocus = this.onFocus.bind(this);\n    }\n    hostConnected() {\n        this.host.addEventListener('change', this.onUpdate);\n        this.host.addEventListener('mousedown', this.onFocus);\n        this.host.addEventListener('focusin', this.onFocus);\n    }\n    hostDisconnected() {\n        this.host.removeEventListener('change', this.onUpdate);\n        this.host.removeEventListener('mousedown', this.onFocus);\n        this.host.removeEventListener('focusin', this.onFocus);\n    }\n    hostUpdated() {\n        this.host.toggleAttribute('filterSelect', this.selectFilteringEnabled);\n        this.onUpdate();\n    }\n    render() {\n        return html `${when(!!this.host.filterStrategy, () => html `<input filterInput />`)}`;\n    }\n    onFocus() {\n        if (this.selectFilteringEnabled) {\n            this.filterControl.focus();\n        }\n    }\n    onUpdate() {\n        if (this.selectFilteringEnabled) {\n            this.setPlaceholder();\n            this.setFilterValue();\n            this.initialized = true;\n        }\n    }\n    setPlaceholder() {\n        const placeholder = (this.options.length && this.options[0].text) || '';\n        this.filterControl.setAttribute('placeholder', placeholder);\n    }\n    setFilterValue() {\n        if (this.initialized && this.host.isEmpty && !!this.filterControl.value) {\n            return;\n        }\n        const value = this.control.value;\n        const selected = value\n            ? Array.from(this.options).find((option) => option.value === value)\n            : undefined;\n        this.filterControl.value = selected?.text || '';\n    }\n    get selectFilteringEnabled() {\n        return (!!this.host.filterStrategy && this.control instanceof HTMLSelectElement);\n    }\n    get control() {\n        return getControl(this.host);\n    }\n    get options() {\n        return this.control.querySelectorAll('option');\n    }\n    get filterControl() {\n        return this.host.renderRoot.querySelector('[filterInput]');\n    }\n}\n//# sourceMappingURL=select-filter.controller.js.map","import { getControl } from '../../../utilities';\n/**\n * Whenever a select element is projected in the default slot, this controller\n * will reflect the native select options by generating a list of `oryx-option` elements.\n * The options are reflected repeatedly whenever the host is updated, so that options that\n * are added dynamically (async) will be reflected.\n *\n * If an input element is used, the input will be made `readonly`, unless filtering is enabled.\n *\n */\nexport class SelectController {\n    constructor(host) {\n        this.host = host;\n        this.options = [];\n        this.host.addController(this);\n    }\n    hostUpdated() {\n        this.initSelect();\n        this.observeSelect();\n    }\n    initSelect() {\n        const control = getControl(this.host);\n        if (control instanceof HTMLSelectElement) {\n            this.reflectSelect(control);\n        }\n        else {\n            control.toggleAttribute('readonly', this.host.filterStrategy === undefined ||\n                this.host.filterStrategy === '');\n        }\n    }\n    reflectSelect(element) {\n        const options = Array.from(element.options)\n            .filter((option) => option.value !== '')\n            .map((nativeOption) => {\n            nativeOption.hidden = true;\n            const reflectedOption = {\n                value: nativeOption.value,\n            };\n            const text = nativeOption.textContent?.trim();\n            if (text !== '' && text !== nativeOption.value) {\n                reflectedOption.text = text;\n            }\n            if (nativeOption.selected) {\n                reflectedOption.selected = true;\n            }\n            return reflectedOption;\n        });\n        if (JSON.stringify(options) !== JSON.stringify(this.options)) {\n            this.options = options;\n            this.reflectOptions();\n        }\n        this.host.isEmpty =\n            (this.host.isEmpty && this.host.hasAttribute('filterselect')) ||\n                (!this.host.isLoading && this.options.length === 0);\n    }\n    reflectOptions() {\n        this.clearOptions();\n        this.options.forEach((option) => {\n            const newOption = `<oryx-option value='${option.value}' ${option.selected ? 'selected' : ''} slot=\"option\">${option.text ?? option.value}</oryx-option>`;\n            this.host.insertAdjacentHTML('beforeend', newOption);\n        });\n    }\n    clearOptions() {\n        this.host.querySelectorAll('oryx-option').forEach((el) => el.remove());\n    }\n    observeSelect() {\n        this.mutationObserver?.disconnect();\n        this.mutationObserver = new MutationObserver(() => {\n            this.host.requestUpdate();\n        });\n        this.mutationObserver.observe(getControl(this.host), {\n            childList: true,\n            subtree: true,\n            attributeFilter: ['selected'],\n        });\n    }\n    hostDisconnected() {\n        this.mutationObserver?.disconnect();\n    }\n}\n//# sourceMappingURL=select.controller.js.map","import { __decorate, __metadata } from \"tslib\";\nimport { SearchboxController, } from '@spryker-oryx/ui/searchbox';\nimport { TypeaheadController, } from '@spryker-oryx/ui/typeahead';\nimport { html, LitElement } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { FormControlController } from '../../../form/input';\nimport { getControl } from '../../utilities/getControl';\nimport { SelectController, SelectFilterController } from './controllers';\nimport { baseStyles } from './styles';\nexport class SelectComponent extends LitElement {\n    constructor() {\n        super(...arguments);\n        this.suffixIcon = 'dropdown';\n        this.searchIconPosition = \"NONE\" /* SearchIconPosition.NONE */;\n        this.clearIconAppearance = \"HOVER\" /* ClearIconAppearance.HOVER */;\n        this.selectController = new SelectController(this);\n        this.selectFilterController = new SelectFilterController(this);\n        this.typeaheadController = new TypeaheadController(this, {\n            showOnFocus: false,\n        });\n        this.searchController = new SearchboxController(this);\n        this.formControlController = new FormControlController(this);\n    }\n    /**\n     * Sets the value of the select element and dispatches\n     * a change event to ensure that the select component will\n     * reflect the state.\n     */\n    setValue(value) {\n        const control = getControl(this);\n        if (control.value === value) {\n            return;\n        }\n        control.value = value;\n        control.dispatchEvent(new Event('change', { bubbles: true, composed: true }));\n    }\n    render() {\n        return html `\n      ${this.formControlController.render({\n            before: this.renderPrefix(),\n            after: this.searchController.renderSuffix(),\n        })}\n      ${this.typeaheadController.renderPopover()}\n    `;\n    }\n    updated() {\n        this.clearIconPosition = this.allowEmptyValue\n            ? \"SUFFIX\" /* ClearIconPosition.SUFFIX */\n            : \"NONE\" /* ClearIconPosition.NONE */;\n    }\n    renderPrefix() {\n        return html `${this.searchController.renderPrefix()}${this.selectFilterController.render()}`;\n    }\n    get allowEmptyValue() {\n        const control = getControl(this);\n        return (control instanceof HTMLInputElement || control.options?.[0]?.value === '');\n    }\n}\nSelectComponent.styles = baseStyles;\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Boolean)\n], SelectComponent.prototype, \"filter\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], SelectComponent.prototype, \"filterStrategy\", void 0);\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Boolean)\n], SelectComponent.prototype, \"isLoading\", void 0);\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Boolean)\n], SelectComponent.prototype, \"isEmpty\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], SelectComponent.prototype, \"emptyMessage\", void 0);\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Boolean)\n], SelectComponent.prototype, \"hasError\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], SelectComponent.prototype, \"label\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], SelectComponent.prototype, \"errorMessage\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], SelectComponent.prototype, \"prefixIcon\", void 0);\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Boolean)\n], SelectComponent.prototype, \"prefixFill\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], SelectComponent.prototype, \"suffixIcon\", void 0);\n__decorate([\n    property({ type: Boolean }),\n    __metadata(\"design:type\", Boolean)\n], SelectComponent.prototype, \"suffixFill\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], SelectComponent.prototype, \"searchIcon\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], SelectComponent.prototype, \"searchIconPosition\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], SelectComponent.prototype, \"clearIcon\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], SelectComponent.prototype, \"clearIconPosition\", void 0);\n__decorate([\n    property(),\n    __metadata(\"design:type\", String)\n], SelectComponent.prototype, \"clearIconAppearance\", void 0);\n//# sourceMappingURL=select.component.js.map"],"names":["SelectFilterController","host","html","when","placeholder","value","selected","option","getControl","SelectController","control","element","options","nativeOption","reflectedOption","text","_a","newOption","el","SelectComponent","LitElement","TypeaheadController","SearchboxController","FormControlController","_b","baseStyles","__decorate","property","__metadata"],"mappings":"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"}